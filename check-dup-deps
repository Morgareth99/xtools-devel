#!/bin/sh
# SPDX-License-Identifier: GPL-3.0-only
find "${1:-srcpkgs/}" -iname template -type f | while IFS= read -r file
do
	file="$(echo "$file" | cut -d/ -f2)"
	hostmakedepends="$(xgetdeps hostmakedepends "$file" | tr " " "\\n" | sort | uniq -d | paste -sd ' ')"
	makedepends="$(xgetdeps makedepends "$file" | tr " " "\\n" | sort | uniq -d | paste -sd ' ')"
	depends="$(xgetdeps depends "$file" | tr " " "\\n" | sort | uniq -d | paste -sd ' ')"
	checkdepends="$(xgetdeps checkdepends "$file" | tr " " "\\n" | sort | uniq -d | paste -sd ' ')"

	[ "$hostmakedepends" ] && printf "%s :: hostmakedepends :: %s\\n" "$file" "$hostmakedepends"
	[ "$makedepends" ] && printf "%s :: makedepends :: %s\\n" "$file" "$makedepends"
	[ "$depends" ] && printf "%s :: depends :: %s\\n" "$file" "$depends"
	[ "$checkdepends" ] && printf "%s :: checkdepends :: %s\\n" "$file" "$checkdepends"
done
